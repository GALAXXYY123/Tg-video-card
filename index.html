<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>POLYANA PROFILE</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family:-apple-system,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      color:#000;
      overflow: hidden;
    }
    
    /* –§–æ–Ω–æ–≤—ã–µ –æ–±–æ–∏ - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ */
    .background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:#000 url('bg.jpg') center/cover no-repeat;
      z-index: -1;
    }
    
    /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .app-container {
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    .title{
      flex-shrink: 0;
      z-index:10;
      text-align:center;
      font-size:40px;
      font-weight:800;
      letter-spacing:.2em;
      text-transform:uppercase;
      text-shadow:0 2px 8px rgba(0,0,0,.5);
      padding:calc(env(safe-area-inset-top) + 8px) 16px 12px;
      background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%);
    }
    
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ª–µ–Ω—Ç—ã –≤–∏–¥–µ–æ —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π */
    .video-feed-container {
      flex: 1;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    /* –õ–µ–Ω—Ç–∞ –≤–∏–¥–µ–æ */
    .video-feed {
      padding: 0 16px 80px;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    
    /* –°—Ç–∏–ª—å –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –≤–∏–¥–µ–æ */
    .video-card {
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      background: #000;
    }
    
    .video-card:active {
      transform: scale(0.98);
    }
    
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∏–¥–µ–æ - —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã */
    .video-container {
      position: relative;
      width: 100%;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* –†–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ */
    .video-square {
      height: 80vw; /* –ö–≤–∞–¥—Ä–∞—Ç - –ø–æ—á—Ç–∏ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
      max-height: 80vh;
    }
    
    .video-portrait {
      height: 140vw; /* –ü–æ—Ä—Ç—Ä–µ—Ç - –≤—ã—Å–æ–∫–∏–π */
      max-height: 140vh;
    }
    
    .video-landscape {
      height: 56.25vw; /* –õ–∞–Ω–¥—à–∞—Ñ—Ç - 16:9 */
      max-height: 56.25vh;
    }
    
    .video-cinema {
      height: 42.85vw; /* –ö–∏–Ω–æ - 21:9 */
      max-height: 42.85vh;
    }
    
    .video-container iframe {
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }
    
    /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ */
    .fullscreen-indicator {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 6px 10px;
      border-radius: 20px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }
    
    .video-card:hover .fullscreen-indicator {
      opacity: 1;
    }
  </style>
</head>
<body>
  <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±–æ–∏ -->
  <div class="background"></div>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div class="app-container">
    <div class="title">POLYANA PROFILE</div>
    
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º–æ–π –ª–µ–Ω—Ç–æ–π -->
    <div class="video-feed-container">
      <div class="video-feed" id="videoFeed">
        <!-- –í–∏–¥–µ–æ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>
  </div>

  <script>
    const tg = window.Telegram?.WebApp;
    if (tg) { 
      tg.ready(); 
      tg.expand(); 
    }

    // –í–°–ï –í–ê–®–ò –í–ò–î–ï–û –£–ñ–ï –í–°–¢–ê–í–õ–ï–ù–´
    const videoLinks = [
      // –ü–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ –∏–∑ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
      {
        url: "https://player.vimeo.com/video/1101236877",
        aspect: "video-landscape"
      },
      // –í–∞—à–∏ –Ω–æ–≤—ã–µ –≤–∏–¥–µ–æ
      {
        url: "https://player.vimeo.com/video/1137811725",
        aspect: "video-landscape"
      },
      {
        url: "https://player.vimeo.com/video/1137818000", 
        aspect: "video-portrait"
      },
      {
        url: "https://player.vimeo.com/video/1137814296",
        aspect: "video-landscape"
      },
      {
        url: "https://player.vimeo.com/video/1137819132",
        aspect: "video-portrait"
      },
      {
        url: "https://player.vimeo.com/video/1137821627",
        aspect: "video-square"
      }
    ];

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Vimeo URL —Å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
    function createVimeoUrl(videoUrl) {
      const baseParams = "title=0&byline=0&portrait=0&badge=0&dnt=1&playsinline=1&autoplay=0&background=0";
      const separator = videoUrl.includes('?') ? '&' : '?';
      return `${videoUrl}${separator}${baseParams}`;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–∏–¥–µ–æ
    function createVideoCard(videoData, index) {
      return `
        <div class="video-card">
          <div class="video-container ${videoData.aspect}">
            <div class="fullscreen-indicator">–ù–∞–∂–º–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞</div>
            <iframe
              src="${createVimeoUrl(videoData.url)}"
              allow="fullscreen; picture-in-picture; autoplay"
              allowfullscreen
              loading="lazy"
              referrerpolicy="strict-origin-when-cross-origin"
              data-video-index="${index}">
            </iframe>
          </div>
        </div>
      `;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –≤–∏–¥–µ–æ
    function loadAllVideos() {
      const videoFeed = document.getElementById('videoFeed');
      
      if (videoLinks.length === 0) {
        videoFeed.innerHTML = '<div style="color: white; text-align: center; padding: 40px;">–ù–µ—Ç –≤–∏–¥–µ–æ –¥–ª—è –ø–æ–∫–∞–∑–∞</div>';
        return;
      }
      
      videoFeed.innerHTML = videoLinks.map((video, index) => 
        createVideoCard(video, index)
      ).join('');
      
      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
      addFullscreenHandlers();
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
    function enterFullscreen(iframe) {
      // Vimeo –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–∏ –∫–ª–∏–∫–µ
      // –°–æ–∑–¥–∞–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∏–∫ –Ω–∞ iframe
      iframe.requestFullscreen?.().catch(() => {});
      
      // –§–æ–∫—É—Å –Ω–∞ iframe –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Vimeo
      iframe.focus();
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    function addFullscreenHandlers() {
      const iframes = document.querySelectorAll('iframe');
      const videoCards = document.querySelectorAll('.video-card');
      
      videoCards.forEach((card, index) => {
        card.addEventListener('click', function(e) {
          // –ï—Å–ª–∏ –∫–ª–∏–∫ –Ω–µ –Ω–∞ —Å–∞–º–æ–º iframe (–≥–¥–µ —É–∂–µ –µ—Å—Ç—å —Å–≤–æ–∏ –∫–æ–Ω—Ç—Ä–æ–ª—ã)
          if (!e.target.closest('iframe')) {
            const iframe = this.querySelector('iframe');
            enterFullscreen(iframe);
          }
        });
      });
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∏–¥–µ–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', loadAllVideos);

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    document.addEventListener('fullscreenchange', function() {
      if (!document.fullscreenElement) {
        // –í—ã—Ö–æ–¥ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
        document.querySelectorAll('iframe').forEach(iframe => {
          iframe.blur();
        });
      }
    });

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ
    window.addNewVideo = function(url, aspect = "video-landscape") {
      videoLinks.push({url, aspect});
      loadAllVideos();
      console.log(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ: ${url}`);
    }

    window.removeVideo = function(index) {
      if (index >= 0 && index < videoLinks.length) {
        const removed = videoLinks.splice(index, 1);
        loadAllVideos();
        console.log(`üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ –≤–∏–¥–µ–æ: ${removed[0].url}`);
      }
    }

    window.showVideoList = function() {
      console.log("üìπ –°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ:");
      videoLinks.forEach((video, index) => {
        console.log(`${index}: ${video.url} (${video.aspect})`);
      });
    }
  </script>
</body>
</html>
